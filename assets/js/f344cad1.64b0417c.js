"use strict";(self.webpackChunkgp_doc_github_io=self.webpackChunkgp_doc_github_io||[]).push([[6667],{2554:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=r(6070),t=r(5710);const i={sidebar_position:6},a="GPA(GraphQL Persistence API)",o={id:"tutorial/graphql-persistence-api",title:"GPA(GraphQL Persistence API)",description:"\u5b9a\u4e49 GraphQL \u6301\u4e45\u5316\u63a5\u53e3",source:"@site/docs/tutorial/graphql-persistence-api.md",sourceDirName:"tutorial",slug:"/tutorial/graphql-persistence-api",permalink:"/docs/tutorial/graphql-persistence-api",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"GPI(GraphQL API)",permalink:"/docs/tutorial/graphql-api"},next:{title:"\u5c0f\u7ed3",permalink:"/docs/tutorial/summary"}},l={},p=[{value:"\u67e5\u8be2\u63a5\u53e3",id:"\u67e5\u8be2\u63a5\u53e3",level:2},{value:"1. \u67e5\u8be2\u6240\u6709 VIP \u7528\u6237",id:"1-\u67e5\u8be2\u6240\u6709-vip-\u7528\u6237",level:3},{value:"2. \u6839\u636e\u53d8\u91cf\u67e5\u8be2\u7528\u6237",id:"2-\u6839\u636e\u53d8\u91cf\u67e5\u8be2\u7528\u6237",level:3},{value:"3. \u63a7\u5236\u67e5\u8be2\u5b57\u6bb5",id:"3-\u63a7\u5236\u67e5\u8be2\u5b57\u6bb5",level:3},{value:"4. \u67e5\u8be2 Alice \u7684\u8ba2\u5355",id:"4-\u67e5\u8be2-alice-\u7684\u8ba2\u5355",level:3},{value:"5. \u5206\u7ec4\u67e5\u8be2\u666e\u901a\u7528\u6237\u548c\u4f1a\u5458\u7528\u6237\u7684\u6570\u91cf",id:"5-\u5206\u7ec4\u67e5\u8be2\u666e\u901a\u7528\u6237\u548c\u4f1a\u5458\u7528\u6237\u7684\u6570\u91cf",level:3},{value:"6. \u67e5\u8be2\u4ef7\u683c\u5728 300 \u4ee5\u5185, \u4ef7\u683c\u6700\u9ad8\u7684\u4ea7\u54c1",id:"6-\u67e5\u8be2\u4ef7\u683c\u5728-300-\u4ee5\u5185-\u4ef7\u683c\u6700\u9ad8\u7684\u4ea7\u54c1",level:3},{value:"\u53d8\u66f4\u63a5\u53e3",id:"\u53d8\u66f4\u63a5\u53e3",level:2},{value:"1. \u65b0\u589e\u7528\u6237 Yara",id:"1-\u65b0\u589e\u7528\u6237-yara",level:3},{value:"2. \u66f4\u65b0\u7528\u6237",id:"2-\u66f4\u65b0\u7528\u6237",level:3},{value:"3. \u5220\u9664\u7528\u6237",id:"3-\u5220\u9664\u7528\u6237",level:3}];function u(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{id:"gpagraphql-persistence-api",children:"GPA(GraphQL Persistence API)"}),"\n",(0,n.jsx)(s.p,{children:"\u5b9a\u4e49 GraphQL \u6301\u4e45\u5316\u63a5\u53e3"}),"\n",(0,n.jsx)(s.p,{children:"GraphQL Persistence API \u7c7b\u4f3c\u4e8e JPA(Java Persistence API), \u6bd4 JPA \u66f4\u7b80\u6d01"}),"\n",(0,n.jsx)(s.p,{children:"\u65b0\u5efa UserRepository.java \u6765\u6784\u5efa persistence api \u793a\u4f8b"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-txt",children:"|-- order-package                             \u8ba2\u5355\u5305\n    |-- build.gradle\n    |-- src\n        |-- main\n        |   |-- java\n        |       |-- demo.gp.order\n        |           |-- api\n        |               |-- SystemApi.java    \u7cfb\u7edfAPI\n        |           |-- dto\n        |           |   |-- annotation        GPA\u6ce8\u89e3\n        |           |   |-- directive         \u6307\u4ee4\u6ce8\u89e3\n        |           |   |-- enumType          \u679a\u4e3e\u7c7b\u578b\n        |           |   |-- inputObjectType   Input\u7c7b\u578b\n        |           |   |-- objectType        Object\u7c7b\u578b\n                    // highlight-start\n        |           |-- repository\n        |               |-- UserRepository.java             \u7528\u6237Repository\n        |               |-- ProductRepository.java          \u4ea7\u54c1Repository\n                    // highlight-end\n        |-- main\n            |-- java\n                |-- demo.gp.order\n                    // highlight-start\n                    |-- test\n                        |-- TestResultLoggerExtension.java  \u6d4b\u8bd5\u7ed3\u679c\u65e5\u5fd7\u62d3\u5c55\n                        |-- UserRepositoryTest.java         \u7528\u6237Repository\u6d4b\u8bd5\u7c7b\n                        |-- ProductRepositoryTest.java      \u4ea7\u54c1Repository\u6d4b\u8bd5\u7c7b\n                    // highlight-end\n"})}),"\n",(0,n.jsx)(s.h2,{id:"\u67e5\u8be2\u63a5\u53e3",children:"\u67e5\u8be2\u63a5\u53e3"}),"\n",(0,n.jsx)(s.h3,{id:"1-\u67e5\u8be2\u6240\u6709-vip-\u7528\u6237",children:"1. \u67e5\u8be2\u6240\u6709 VIP \u7528\u6237"}),"\n",(0,n.jsxs)(s.p,{children:["\u5b9a\u4e49 queryVIPUserList \u65b9\u6cd5, \u4f7f\u7528@Query \u6ce8\u89e3\u6807\u8bb0\u63a5\u53e3\u65b9\u6cd5, \u8bf7\u6ce8\u610f, \u6b64\u5904\u7684@Query \u6ce8\u89e3\u662f\u5728\u4e4b\u524d\u751f\u6210\u7684\u7684",(0,n.jsx)(s.a,{href:"/docs/tutorial/quick-start#4-%E4%BD%BF%E7%94%A8-gradle-%E6%8F%92%E4%BB%B6%E7%94%9F%E6%88%90-java-bean",children:"GPA \u6ce8\u89e3"}),", ",(0,n.jsx)(s.strong,{children:"\u5e76\u975e org.eclipse.microprofile.graphql.Query"})]}),"\n",(0,n.jsx)(s.p,{children:"@Query \u6ce8\u89e3\u4e2d\u5305\u542b\u6240\u6709\u7684 GraphQL \u67e5\u8be2\u5b57\u6bb5, \u53c2\u6570\u548c\u5b57\u6bb5\u53c2\u6570\u76f8\u540c"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:"package demo.gp.order.repository;\n\n// highlight-start\nimport demo.gp.order.dto.annotation.Query;\n// highlight-end\nimport demo.gp.order.dto.annotation.UserListQueryArguments;\nimport demo.gp.order.dto.annotation.UserTypeExpression1;\nimport demo.gp.order.dto.enumType.UserType;\nimport demo.gp.order.dto.objectType.User;\nimport io.graphoenix.core.dto.enumType.Operator;\nimport io.graphoenix.spi.annotation.GraphQLOperation;\n\nimport java.util.List;\n\n// highlight-start\n@GraphQLOperation // \u4f7f\u7528@GraphQLOperation \u6ce8\u89e3\u6807\u8bb0\u63a5\u53e3\u6240\u5728 CDI Bean\n// highlight-end\npublic interface UserRepository {\n\n    // highlight-start\n    // \u67e5\u8be2\u6240\u6709\u7528\u6237\u7c7b\u578b=VIP\u7684User\n    @Query(userList = @UserListQueryArguments(userType = @UserTypeExpression1(opr = Operator.EQ, val = UserType.VIP)))\n    // highlight-end\n    Mono<List<User>> queryVIPUserList();\n}\n"})}),"\n",(0,n.jsx)(s.p,{children:"\u6d4b\u8bd5\u6bcf\u4e00\u4e2a User \u7684 userType"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:"package demo.gp.order.test;\n\nimport demo.gp.order.dto.enumType.UserType;\nimport demo.gp.order.dto.objectType.User;\nimport demo.gp.order.repository.UserRepository;\nimport io.nozdormu.spi.context.BeanContext;\nimport org.junit.jupiter.api.Test;\n\nimport java.util.List;\n\nimport static org.junit.jupiter.api.Assertions.*;\n\n@ExtendWith(TestResultLoggerExtension.class)\npublic class UserRepositoryTest {\n\n    private final UserRepository userRepository = BeanContext.get(UserRepository.class);\n\n    @Test\n    void queryVIPUserListTest() {\n        List<User> userLit = userRepository.queryVIPUserList().block();\n        assertAll(\n                userLit.stream().map((item) -> () -> assertEquals(item.getUserType(), UserType.VIP))\n        );\n    }\n}\n"})}),"\n",(0,n.jsx)(s.p,{children:"\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-log",children:"INFO: Test Successful for test queryVIPUserListTest():\n"})}),"\n",(0,n.jsx)(s.h3,{id:"2-\u6839\u636e\u53d8\u91cf\u67e5\u8be2\u7528\u6237",children:"2. \u6839\u636e\u53d8\u91cf\u67e5\u8be2\u7528\u6237"}),"\n",(0,n.jsxs)(s.p,{children:["\u4ee5 ",(0,n.jsx)(s.strong,{children:"$"})," \u5f00\u5934\u7684\u53c2\u6570\u53ef\u4ee5\u6307\u5b9a\u65b9\u6cd5\u53c2\u6570\u540d, \u4f5c\u4e3a\u63a5\u53e3\u53d8\u91cf"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'package demo.gp.order.repository;\n\n// highlight-start\nimport demo.gp.order.dto.annotation.Query;\n// highlight-end\nimport demo.gp.order.dto.annotation.UserListQueryArguments;\nimport demo.gp.order.dto.annotation.UserTypeExpression1;\nimport demo.gp.order.dto.enumType.UserType;\nimport demo.gp.order.dto.objectType.User;\nimport io.graphoenix.core.dto.enumType.Operator;\nimport io.graphoenix.spi.annotation.GraphQLOperation;\n\nimport java.util.List;\n\n@GraphQLOperation\npublic interface UserRepository {\n\n    // highlight-start\n    // \u67e5\u8be2\u6240\u6709\u7528\u6237\u7c7b\u578b=userType\u53c2\u6570\u7684User\n    @Query(userList = @UserListQueryArguments(userType = @UserTypeExpression1(opr = Operator.EQ, $val = "userType")))\n    // highlight-end\n    Mono<List<User>> queryUserListByUserType(UserType userType);\n}\n'})}),"\n",(0,n.jsx)(s.p,{children:"\u6d4b\u8bd5\u6bcf\u4e00\u4e2a User \u7684 userType"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:"@ExtendWith(TestResultLoggerExtension.class)\npublic class UserRepositoryTest {\n\n    private final UserRepository userRepository = BeanContext.get(UserRepository.class);\n\n    @Test\n    void queryUserListByUserTypeTest() {\n        List<User> userLit = userRepository.queryUserListByUserType(UserType.REGULAR).block();\n        assertAll(\n                userLit.stream().map((item) -> () -> assertEquals(item.getUserType(), UserType.REGULAR))\n        );\n    }\n}\n"})}),"\n",(0,n.jsx)(s.p,{children:"\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-log",children:"INFO: Test Successful for test queryVIPUserListByUserTypeTest():\n"})}),"\n",(0,n.jsx)(s.h3,{id:"3-\u63a7\u5236\u67e5\u8be2\u5b57\u6bb5",children:"3. \u63a7\u5236\u67e5\u8be2\u5b57\u6bb5"}),"\n",(0,n.jsx)(s.p,{children:"GPA \u63a5\u53e3\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u53ea\u4f1a\u67e5\u8be2\u6240\u6709 Scalar \u5b57\u6bb5, \u53ef\u4ee5\u4f7f\u7528@SelectionSet \u6ce8\u89e3\u81ea\u5b9a\u4e49\u67e5\u8be2\u5b57\u6bb5"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'@GraphQLOperation\npublic interface UserRepository {\n\n    @Query(userList = @UserListQueryArguments(userType = @UserTypeExpression1(opr = Operator.EQ, $val = "userType")))\n    // highlight-start\n    // \u67e5\u8be2name\u5b57\u6bb5\n    @SelectionSet("{ name }")\n    // highlight-end\n    Mono<List<User>> queryUserNameListByUserType(UserType userType);\n}\n'})}),"\n",(0,n.jsx)(s.p,{children:"\u6d4b\u8bd5\u6bcf\u4e00\u4e2a User \u7684 \u8fd4\u56de\u5b57\u6bb5, \u9664 name \u5b57\u6bb5\u5916\u5168\u90e8\u4e3a null"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:"@ExtendWith(TestResultLoggerExtension.class)\npublic class UserRepositoryTest {\n\n    private final UserRepository userRepository = BeanContext.get(UserRepository.class);\n\n    @Test\n    void queryUserNameListByUserTypeTest() {\n        List<User> userLit = userRepository.queryUserNameListByUserType(UserType.REGULAR).block();\n        assertAll(\n                userLit.stream().map((item) ->\n                        () -> assertAll(\n                                () -> assertNotNull(item.getName()),\n                                () -> assertNull(item.getId()),\n                                () -> assertNull(item.getUserType()),\n                                () -> assertNull(item.getEmail()),\n                                () -> assertNull(item.getPhoneNumbers())\n                        )\n                )\n        );\n    }\n}\n"})}),"\n",(0,n.jsx)(s.p,{children:"\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-log",children:"INFO: Test Successful for test queryUserNameListByUserTypeTest():\n"})}),"\n",(0,n.jsx)(s.h3,{id:"4-\u67e5\u8be2-alice-\u7684\u8ba2\u5355",children:"4. \u67e5\u8be2 Alice \u7684\u8ba2\u5355"}),"\n",(0,n.jsx)(s.p,{children:"\u4f7f\u7528 name \u53c2\u6570\u4f5c\u4e3a\u7528\u6237\u540d\u67e5\u8be2\u53d8\u91cf, \u67e5\u8be2\u7528\u6237\u7684\u8ba2\u5355\u4fe1\u606f"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'@GraphQLOperation\npublic interface UserRepository {\n\n    // highlight-start\n    @Query(user = @UserQueryArguments(name = @StringExpression1(opr = Operator.EQ, $val = "name")))\n    @SelectionSet("{ name orders { items { product { name } quantity } } }")\n    // highlight-end\n    Mono<User> queryUserOrdersListByName(String name);\n}\n'})}),"\n",(0,n.jsx)(s.p,{children:"\u6d4b\u8bd5\u6bcf\u4e00\u4e2a User \u7684 \u8ba2\u5355\u4fe1\u606f"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'@ExtendWith(TestResultLoggerExtension.class)\npublic class UserRepositoryTest {\n\n    private final UserRepository userRepository = BeanContext.get(UserRepository.class);\n\n    @Test\n    void queryUserOrdersListByNameTest() {\n        User user = userRepository.queryUserOrdersListByName("Alice").block();\n        assertAll(\n                () -> assertEquals(user.getOrders().size(), 1),\n                () -> assertEquals(new ArrayList<>(user.getOrders()).get(0).getItems().size(), 2),\n                () -> assertEquals(new ArrayList<>(new ArrayList<>(user.getOrders()).get(0).getItems()).get(0).getProduct().getName(), "Laptop"),\n                () -> assertEquals(new ArrayList<>(new ArrayList<>(user.getOrders()).get(0).getItems()).get(0).getQuantity(), 1),\n                () -> assertEquals(new ArrayList<>(new ArrayList<>(user.getOrders()).get(0).getItems()).get(1).getProduct().getName(), "Tablet"),\n                () -> assertEquals(new ArrayList<>(new ArrayList<>(user.getOrders()).get(0).getItems()).get(1).getQuantity(), 2)\n        );\n    }\n}\n'})}),"\n",(0,n.jsx)(s.p,{children:"\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-log",children:"INFO: Test Successful for test queryUserOrdersListByNameTest():\n"})}),"\n",(0,n.jsx)(s.h3,{id:"5-\u5206\u7ec4\u67e5\u8be2\u666e\u901a\u7528\u6237\u548c\u4f1a\u5458\u7528\u6237\u7684\u6570\u91cf",children:"5. \u5206\u7ec4\u67e5\u8be2\u666e\u901a\u7528\u6237\u548c\u4f1a\u5458\u7528\u6237\u7684\u6570\u91cf"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'@GraphQLOperation\npublic interface UserRepository {\n\n    // highlight-start\n    @Query(userList = @UserListQueryArguments(groupBy = {"userType"}))\n    @SelectionSet("{ userType idCount }")\n    // highlight-end\n    Mono<List<User>> queryUserCountByUserType();\n}\n'})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:"@ExtendWith(TestResultLoggerExtension.class)\npublic class UserRepositoryTest {\n\n    private final UserRepository userRepository = BeanContext.get(UserRepository.class);\n\n    @Test\n    void queryUserCountByUserTypeTest() {\n        List<User> userList = userRepository.queryUserCountByUserType().block();\n        assertAll(\n                () -> assertEquals(userList.size(), 2),\n                () -> assertEquals(new ArrayList<>(userList).get(0).getUserType(), UserType.VIP),\n                () -> assertEquals(new ArrayList<>(userList).get(0).getIdCount(), 12),\n                () -> assertEquals(new ArrayList<>(userList).get(1).getUserType(), UserType.REGULAR),\n                () -> assertEquals(new ArrayList<>(userList).get(1).getIdCount(), 12)\n        );\n    }\n}\n"})}),"\n",(0,n.jsx)(s.p,{children:"\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-log",children:"INFO: Test Successful for test queryUserCountByUserTypeTest():\n"})}),"\n",(0,n.jsx)(s.h3,{id:"6-\u67e5\u8be2\u4ef7\u683c\u5728-300-\u4ee5\u5185-\u4ef7\u683c\u6700\u9ad8\u7684\u4ea7\u54c1",children:"6. \u67e5\u8be2\u4ef7\u683c\u5728 300 \u4ee5\u5185, \u4ef7\u683c\u6700\u9ad8\u7684\u4ea7\u54c1"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'@GraphQLOperation\npublic interface ProductRepository {\n\n    // highlight-start\n    @Query(product = @ProductQueryArguments(price = @FloatExpression1(opr = Operator.LTE, $val = "price")))\n    @SelectionSet("{ name priceMax }")\n    // highlight-end\n    Mono<Product> queryPriceMaxLessThan(Float price);\n}\n'})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'@ExtendWith(TestResultLoggerExtension.class)\npublic class ProductRepositoryTest {\n\n    private final ProductRepository productRepository = BeanContext.get(ProductRepository.class);\n\n    @Test\n    void queryPriceMaxLessThanTest() {\n        Product product = productRepository.queryPriceMaxLessThan(300.00f).block();\n        assertAll(\n                () -> assertEquals(product.getName(), "Tablet"),\n                () -> assertEquals(product.getPriceMax(), 299.99f)\n        );\n    }\n}\n'})}),"\n",(0,n.jsx)(s.p,{children:"\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-log",children:"INFO: Test Successful for test queryPriceMaxLessThanTest():\n"})}),"\n",(0,n.jsx)(s.h2,{id:"\u53d8\u66f4\u63a5\u53e3",children:"\u53d8\u66f4\u63a5\u53e3"}),"\n",(0,n.jsx)(s.h3,{id:"1-\u65b0\u589e\u7528\u6237-yara",children:"1. \u65b0\u589e\u7528\u6237 Yara"}),"\n",(0,n.jsxs)(s.p,{children:["\u4f7f\u7528@Mutation \u6ce8\u89e3\u6807\u8bb0\u63a5\u53e3\u65b9\u6cd5, \u8bf7\u6ce8\u610f, \u6b64\u5904\u7684@Mutation \u6ce8\u89e3\u662f\u5728\u4e4b\u524d\u751f\u6210\u7684\u7684",(0,n.jsx)(s.a,{href:"/docs/tutorial/quick-start#4-%E4%BD%BF%E7%94%A8-gradle-%E6%8F%92%E4%BB%B6%E7%94%9F%E6%88%90-java-bean",children:"GPA \u6ce8\u89e3"}),", ",(0,n.jsx)(s.strong,{children:"\u5e76\u975e org.eclipse.microprofile.graphql.Mutation"})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'@GraphQLOperation\npublic interface UserRepository {\n\n    // highlight-start\n    @Mutation(user = @UserMutationArguments($input = "userInput"))\n    // highlight-end\n    @SelectionSet("{ id name email userType }")\n    Mono<User> mutationUser(UserInput userInput);\n}\n'})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'@ExtendWith(TestResultLoggerExtension.class)\npublic class UserRepositoryTest {\n\n    private final UserRepository userRepository = BeanContext.get(UserRepository.class);\n\n    @Test\n    void mutationUserTest() {\n        UserInput userInput = new UserInput();\n        userInput.setName("Yara");\n        userInput.setEmail("yara@example.com");\n        userInput.setUserType(UserType.VIP);\n        User user = userRepository.mutationUser(userInput).block();\n        assertAll(\n                () -> assertNotNull(user.getId()),\n                () -> assertEquals(user.getName(), "Yara"),\n                () -> assertEquals(user.getEmail(), "yara@example.com"),\n                () -> assertEquals(user.getUserType(), UserType.VIP)\n        );\n    }\n}\n'})}),"\n",(0,n.jsx)(s.p,{children:"\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-log",children:"INFO: Test Successful for test mutationUserTest():\n"})}),"\n",(0,n.jsx)(s.h3,{id:"2-\u66f4\u65b0\u7528\u6237",children:"2. \u66f4\u65b0\u7528\u6237"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'@GraphQLOperation\npublic interface UserRepository {\n\n    // highlight-start\n    @Mutation(user = @UserMutationArguments($userType = "userType", where = @UserExpression1(name = @StringExpression2(opr = Operator.EQ, $val = "name"))))\n    // highlight-end\n    @SelectionSet("{ id name userType }")\n    Mono<User> updateUserTypeByName(UserType userType, String name);\n}\n'})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'@ExtendWith(TestResultLoggerExtension.class)\npublic class UserRepositoryTest {\n\n    private final UserRepository userRepository = BeanContext.get(UserRepository.class);\n\n    @Test\n    void updateUserTypeByNameTest() {\n        User user = userRepository.updateUserTypeByName(UserType.REGULAR, "Yara").block();\n        assertAll(\n                () -> assertEquals(user.getName(), "Yara"),\n                () -> assertEquals(user.getUserType(), UserType.REGULAR)\n        );\n    }\n}\n'})}),"\n",(0,n.jsx)(s.p,{children:"\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-log",children:"INFO: Test Successful for test updateUserTypeByNameTest():\n"})}),"\n",(0,n.jsx)(s.h3,{id:"3-\u5220\u9664\u7528\u6237",children:"3. \u5220\u9664\u7528\u6237"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'@GraphQLOperation\npublic interface UserRepository {\n\n    // highlight-start\n    @Mutation(user = @UserMutationArguments(isDeprecated = true, where = @UserExpression1(name = @StringExpression2(opr = Operator.EQ, $val = "name"))))\n    // highlight-end\n    @SelectionSet("{ id }")\n    Mono<User> removeUserByName(String name);\n}\n'})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-java",children:'@ExtendWith(TestResultLoggerExtension.class)\npublic class UserRepositoryTest {\n\n    private final UserRepository userRepository = BeanContext.get(UserRepository.class);\n\n    @Test\n    void removeUserByNameTest() {\n        User user = userRepository.removeUserByName("Yara").block();\n        assertNull(user);\n    }\n}\n'})}),"\n",(0,n.jsx)(s.p,{children:"\u8f93\u51fa\u7ed3\u679c"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-log",children:"INFO: Test Successful for test removeUserByNameTest():\n"})})]})}function c(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},5710:(e,s,r)=>{r.d(s,{R:()=>a,x:()=>o});var n=r(758);const t={},i=n.createContext(t);function a(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);