"use strict";(self.webpackChunkgp_doc_github_io=self.webpackChunkgp_doc_github_io||[]).push([[617],{8188:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>g,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var r=t(6070),i=t(5710);const a={sidebar_position:5},s="GPI(GraphQL Api)",l={id:"tutorial/graphql-api",title:"GPI(GraphQL Api)",description:"\u5b9a\u4e49 GraphQL \u7f16\u7a0b\u63a5\u53e3.",source:"@site/docs/tutorial/graphql-api.md",sourceDirName:"tutorial",slug:"/tutorial/graphql-api",permalink:"/docs/tutorial/graphql-api",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"\u53d8\u66f4(mutation)",permalink:"/docs/tutorial/mutation"},next:{title:"\u6307\u5357",permalink:"/docs/category/\u6307\u5357"}},o={},p=[{value:"\u67e5\u8be2\u63a5\u53e3",id:"\u67e5\u8be2\u63a5\u53e3",level:2},{value:"1. \u5b9a\u4e49\u4e00\u4e2a\u7b80\u5355\u63a5\u53e3, \u4f20\u5165 userName, \u8fd4\u56de\u6b22\u8fce\u548c\u7cfb\u7edf\u65f6\u95f4",id:"1-\u5b9a\u4e49\u4e00\u4e2a\u7b80\u5355\u63a5\u53e3-\u4f20\u5165-username-\u8fd4\u56de\u6b22\u8fce\u548c\u7cfb\u7edf\u65f6\u95f4",level:3},{value:"\u53d8\u66f4\u63a5\u53e3",id:"\u53d8\u66f4\u63a5\u53e3",level:2},{value:"1. \u6a21\u62df\u4e00\u4e2a\u7528\u6237\u6ce8\u518c\u63a5\u53e3",id:"1-\u6a21\u62df\u4e00\u4e2a\u7528\u6237\u6ce8\u518c\u63a5\u53e3",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"gpigraphql-api",children:"GPI(GraphQL Api)"}),"\n",(0,r.jsx)(n.p,{children:"\u5b9a\u4e49 GraphQL \u7f16\u7a0b\u63a5\u53e3."}),"\n",(0,r.jsxs)(n.p,{children:["GraphQL Api \u57fa\u4e8e",(0,r.jsx)(n.a,{href:"https://github.com/eclipse/microprofile-graphql",children:"Microprofile GraphQL \u534f\u8bae"}),"\u5b9e\u73b0"]}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528@GraphQLApi \u6ce8\u89e3\u6807\u8bb0 CDI Bean"}),"\n",(0,r.jsx)(n.h2,{id:"\u67e5\u8be2\u63a5\u53e3",children:"\u67e5\u8be2\u63a5\u53e3"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u5b9a\u4e49\u4e00\u4e2a\u7b80\u5355\u63a5\u53e3-\u4f20\u5165-username-\u8fd4\u56de\u6b22\u8fce\u548c\u7cfb\u7edf\u65f6\u95f4",children:"1. \u5b9a\u4e49\u4e00\u4e2a\u7b80\u5355\u63a5\u53e3, \u4f20\u5165 userName, \u8fd4\u56de\u6b22\u8fce\u548c\u7cfb\u7edf\u65f6\u95f4"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-txt",children:"|-- order-package                             \u8ba2\u5355\u5305\n    |-- build.gradle\n    |-- src\n        |-- main\n            |-- java\n                |-- demo.gp.order\n                    // highlight-start\n                    |-- api\n                        |-- SystemApi.java    \u7cfb\u7edfAPI\n                    // highlight-end\n                    |-- dto\n                        |-- annotation        GPA\u6ce8\u89e3\n                        |-- directive         \u6307\u4ee4\u6ce8\u89e3\n                        |-- enumType          \u679a\u4e3e\u7c7b\u578b\n                        |-- inputObjectType   Input\u7c7b\u578b\n                        |-- objectType        Object\u7c7b\u578b\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5b9a\u4e49 hello \u63a5\u53e3, \u4f7f\u7528@Query \u6ce8\u89e3\u6807\u8bb0\u63a5\u53e3\u65b9\u6cd5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'package demo.gp.order.api;\n\nimport jakarta.enterprise.context.ApplicationScoped;\nimport org.eclipse.microprofile.graphql.GraphQLApi;\nimport org.eclipse.microprofile.graphql.Query;\n\nimport java.time.LocalDateTime;\n\n// highlight-start\n@GraphQLApi\n// highlight-end\n@ApplicationScoped\npublic class SystemApi {\n\n// highlight-start\n    @Query\n    public String hello(String userName) {\n        return "Hello " + userName + ", The time is now " + LocalDateTime.now();\n    }\n// highlight-end\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u8be2 hello \u63a5\u53e3"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'{\n  hello(userName: "Gosling")\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "hello": "Hello Gosling, The time is now 2024-05-30T11:51:41.164692"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u53d8\u66f4\u63a5\u53e3",children:"\u53d8\u66f4\u63a5\u53e3"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u6a21\u62df\u4e00\u4e2a\u7528\u6237\u6ce8\u518c\u63a5\u53e3",children:"1. \u6a21\u62df\u4e00\u4e2a\u7528\u6237\u6ce8\u518c\u63a5\u53e3"}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528@Input \u6ce8\u89e3\u5b9a\u4e49\u8f93\u5165\u5bf9\u8c61"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'package demo.gp.order.api;\n\nimport org.eclipse.microprofile.graphql.Input;\n\nimport java.time.LocalDate;\n\n@Input\npublic class RegisterInput {\n\n    @Description("\u59d3\u540d")\n    private String name;\n\n    @Description("\u90ae\u7bb1")\n    private String email;\n\n    @Description("\u751f\u65e5")\n    private LocalDate birthday;\n\n    // ...\u7701\u7565getter\u548csetter\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528@Type \u6ce8\u89e3\u5b9a\u4e49\u8f93\u51fa\u5bf9\u8c61"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'package demo.gp.order.api;\n\nimport org.eclipse.microprofile.graphql.Type;\n\n@Type\npublic class RegisterResult {\n\n    @Description("\u8d26\u53f7")\n    private String account;\n\n    @Description("\u5bc6\u7801")\n    private String password;\n\n    @Description("\u5e74\u9f84")\n    private Integer age;\n\n    // ...\u7701\u7565getter\u548csetter\n}\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5b9a\u4e49 register \u63a5\u53e3, \u4f7f\u7528@Mutation \u6ce8\u89e3\u6807\u8bb0\u63a5\u53e3\u65b9\u6cd5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"@GraphQLApi\n@ApplicationScoped\npublic class SystemApi {\n\n    // ...\u7701\u7565\u5176\u4ed6\u65b9\u6cd5\n\n    @Mutation\n    public RegisterResult register(RegisterInput registerInput) {\n        String account = registerInput.getEmail().substring(0, registerInput.getEmail().indexOf(\"@\"));\n        Integer age = Period.between(registerInput.getBirthday(), LocalDate.now()).getYears();\n\n        RegisterResult registerResult = new RegisterResult();\n        registerResult.setAccount(account);\n        registerResult.setPassword(genPassword());\n        registerResult.setAge(age);\n\n        return registerResult;\n    }\n\n    private String genPassword() {\n        int leftLimit = 97; // letter 'a'\n        int rightLimit = 122; // letter 'z'\n        int targetStringLength = 10;\n        Random random = new Random();\n\n        return random.ints(leftLimit, rightLimit + 1)\n                .limit(targetStringLength)\n                .collect(StringBuilder::new, StringBuilder::appendCodePoint, StringBuilder::append)\n                .toString();\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8c03\u7528 register \u63a5\u53e3"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:'mutation {\n  register(\n    registerInput: {name: "Gosling", email: "gosling@java.com", birthday: "1955-05-19"}\n  ) {\n    account\n    password\n    age\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "register": {\n      "account": "gosling",\n      "password": "vuvvtrachs",\n      "age": 69\n    }\n  }\n}\n'})})]})}function g(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},5710:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var r=t(758);const i={},a=r.createContext(i);function s(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);