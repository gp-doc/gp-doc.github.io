"use strict";(self.webpackChunkgp_doc_github_io=self.webpackChunkgp_doc_github_io||[]).push([[189],{5433:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>c});var i=a(6070),r=a(5710);const d={sidebar_position:4},s="\u53d8\u66f4(mutation)",t={id:"tutorial/mutation",title:"\u53d8\u66f4(mutation)",description:"\u5feb\u901f\u6d4f\u89c8\u53d8\u66f4\u793a\u4f8b.",source:"@site/docs/tutorial/mutation.md",sourceDirName:"tutorial",slug:"/tutorial/mutation",permalink:"/docs/tutorial/mutation",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"\u67e5\u8be2(query)",permalink:"/docs/tutorial/query"},next:{title:"GPI(GraphQL Api)",permalink:"/docs/tutorial/graphql-api"}},l={},c=[{value:"\u57fa\u672c\u53d8\u66f4",id:"\u57fa\u672c\u53d8\u66f4",level:2},{value:"1. \u65b0\u589e\u7528\u6237 Uma",id:"1-\u65b0\u589e\u7528\u6237-uma",level:3},{value:"2. \u65b0\u589e\u7528\u6237 Victor \u548c Wendy",id:"2-\u65b0\u589e\u7528\u6237-victor-\u548c-wendy",level:3},{value:"3. \u65b0\u589e\u7528\u6237 Xander, \u540c\u65f6\u8d2d\u4e70\u65b0\u589e\u7684\u4ea7\u54c1 Mouse",id:"3-\u65b0\u589e\u7528\u6237-xander-\u540c\u65f6\u8d2d\u4e70\u65b0\u589e\u7684\u4ea7\u54c1-mouse",level:3},{value:"\u66f4\u65b0",id:"\u66f4\u65b0",level:2},{value:"1. \u901a\u8fc7 ID \u7c7b\u578b\u5b57\u6bb5\u66f4\u65b0 Uma \u7684\u7528\u6237\u7c7b\u578b",id:"1-\u901a\u8fc7-id-\u7c7b\u578b\u5b57\u6bb5\u66f4\u65b0-uma-\u7684\u7528\u6237\u7c7b\u578b",level:3},{value:"2. \u901a\u8fc7 where \u5b57\u6bb5\u66f4\u65b0 Uma \u7684\u7528\u6237\u7c7b\u578b",id:"2-\u901a\u8fc7-where-\u5b57\u6bb5\u66f4\u65b0-uma-\u7684\u7528\u6237\u7c7b\u578b",level:3},{value:"\u5220\u9664",id:"\u5220\u9664",level:2},{value:"1. \u5220\u9664\u7528\u6237 Wendy",id:"1-\u5220\u9664\u7528\u6237-wendy",level:3},{value:"\u5408\u5e76\u5bf9\u8c61\u6570\u7ec4",id:"\u5408\u5e76\u5bf9\u8c61\u6570\u7ec4",level:2},{value:"1. Diana \u7684\u8ba2\u5355\u589e\u52a0 2 \u4e2a Keyboard",id:"1-diana-\u7684\u8ba2\u5355\u589e\u52a0-2-\u4e2a-keyboard",level:3},{value:"2. \u79fb\u9664 Diana \u7684\u8ba2\u5355\u4e2d\u7684 Tablet",id:"2-\u79fb\u9664-diana-\u7684\u8ba2\u5355\u4e2d\u7684-tablet",level:3}];function o(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"\u53d8\u66f4mutation",children:"\u53d8\u66f4(mutation)"}),"\n",(0,i.jsx)(e.p,{children:"\u5feb\u901f\u6d4f\u89c8\u53d8\u66f4\u793a\u4f8b."}),"\n",(0,i.jsx)(e.p,{children:"\u53d8\u66f4\u5305\u542b\u65b0\u589e(Insert)\u548c\u66f4\u65b0(Update)\u4e24\u79cd\u64cd\u4f5c, \u5728 GraphQL \u7684\u57fa\u7840\u4e4b\u4e0a, \u6211\u4eec\u89c4\u5b9a:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6bcf\u4e2a Object",(0,i.jsx)(e.strong,{children:"\u6709\u4e14\u4ec5\u6709 1 \u4e2a ID \u7c7b\u578b\u7684\u5b57\u6bb5"})]}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u53d8\u66f4\u65f6, \u5982\u679c ID \u7c7b\u578b\u7684\u5b57\u6bb5\u4e3a\u7a7a, \u5219\u65b0\u589e, ID \u5b57\u6bb5\u7531\u6570\u636e\u5e93\u81ea\u52a8\u751f\u6210"}),"\n",(0,i.jsx)(e.li,{children:"\u5728\u53d8\u66f4\u65f6, \u5982\u679c ID \u7c7b\u578b\u7684\u5b57\u6bb5\u4e0d\u4e3a\u7a7a, \u5219\u7531\u6570\u636e\u5e93\u5224\u65ad, \u6570\u636e\u5e93\u5305\u542b\u8be5\u503c\u65f6\u66f4\u65b0, \u53cd\u4e4b\u5219\u8fdb\u884c\u65b0\u589e"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u53e6\u5916, \u67e5\u8be2(query)\u5b57\u6bb5\u65f6, \u662f\u5e76\u884c\u6267\u884c, \u800c",(0,i.jsx)(e.strong,{children:"\u53d8\u66f4(mutation)\u5b57\u6bb5\u65f6, \u662f\u7ebf\u6027\u6267\u884c, \u4e00\u4e2a\u63a5\u7740\u4e00\u4e2a"})]}),"\n",(0,i.jsx)(e.h2,{id:"\u57fa\u672c\u53d8\u66f4",children:"\u57fa\u672c\u53d8\u66f4"}),"\n",(0,i.jsx)(e.p,{children:"\u53d8\u66f4\u5355\u4e2a: \u7c7b\u578b\u540d => camelCase (\u4f8b: User => user)"}),"\n",(0,i.jsx)(e.p,{children:"\u53d8\u66f4\u5217\u8868: \u7c7b\u578b\u540d => camelCase + List (\u4f8b: User => userList)"}),"\n",(0,i.jsx)(e.h3,{id:"1-\u65b0\u589e\u7528\u6237-uma",children:"1. \u65b0\u589e\u7528\u6237 Uma"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'mutation {\n  user(\n    name: "Uma"\n    email: "uma@example.com"\n    userType: VIP\n    phoneNumbers: ["13918124629", "18536492446"]\n  ) {\n    id\n    name\n    email\n    phoneNumbers\n    userType\n  }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u6570\u636e\u5e93\u81ea\u52a8\u751f\u6210 id"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "data": {\n    "user": {\n      // highlight-start\n      "id": "21",\n      // highlight-end\n      "name": "Uma",\n      "email": "uma@example.com",\n      "phoneNumbers": ["13918124629", "18536492446"],\n      "userType": "VIP"\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"2-\u65b0\u589e\u7528\u6237-victor-\u548c-wendy",children:"2. \u65b0\u589e\u7528\u6237 Victor \u548c Wendy"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'mutation {\n  userList(\n    list: [\n      {\n        name: "Victor"\n        email: "victor@example.com"\n        userType: REGULAR\n        phoneNumbers: ["17250165257", "15548312357"]\n      }\n      {\n        id: "23"\n        name: "Wendy"\n        email: "wendy@example.com"\n        userType: VIP\n        phoneNumbers: ["19703870624"]\n      }\n    ]\n  ) {\n    id\n    name\n    email\n    phoneNumbers\n    userType\n  }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"Victor \u7684 id \u7531\u6570\u636e\u5e93\u751f\u6210, Wendy \u7684 id \u662f\u53d8\u66f4\u65f6\u6307\u5b9a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "data": {\n    "userList": [\n      {\n        // highlight-start\n        "id": "22",\n        // highlight-end\n        "name": "Victor",\n        "email": "victor@example.com",\n        "phoneNumbers": ["17250165257", "15548312357"],\n        "userType": "REGULAR"\n      },\n      {\n        // highlight-start\n        "id": "23",\n        // highlight-end\n        "name": "Wendy",\n        "email": "wendy@example.com",\n        "phoneNumbers": ["19703870624"],\n        "userType": "VIP"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"3-\u65b0\u589e\u7528\u6237-xander-\u540c\u65f6\u8d2d\u4e70\u65b0\u589e\u7684\u4ea7\u54c1-mouse",children:"3. \u65b0\u589e\u7528\u6237 Xander, \u540c\u65f6\u8d2d\u4e70\u65b0\u589e\u7684\u4ea7\u54c1 Mouse"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'mutation {\n  user(\n    name: "Xander"\n    email: "xander@example.com"\n    userType: REGULAR\n    orders: [\n      { items: [{ product: { name: "Mouse", price: 25.99 }, quantity: 2 }] }\n    ]\n  ) {\n    id\n    name\n    email\n    userType\n    orders {\n      items {\n        product {\n          name\n        }\n        quantity\n      }\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "data": {\n    "user": {\n      "id": "24",\n      "name": "Xander",\n      "email": "xander@example.com",\n      "userType": "REGULAR",\n      "orders": [\n        {\n          "items": [\n            {\n              "product": {\n                "name": "Mouse"\n              },\n              "quantity": 2\n            }\n          ]\n        }\n      ]\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:"{\n  productList {\n    id\n    name\n    price\n  }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u65b0\u589e\u4ea7\u54c1 Mouse"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "data": {\n    "productList": [\n      {\n        "id": "1",\n        "name": "Laptop",\n        "price": 999.99\n      },\n      {\n        "id": "2",\n        "name": "Phone",\n        "price": 499.99\n      },\n      {\n        "id": "3",\n        "name": "Tablet",\n        "price": 299.99\n      },\n      {\n        "id": "4",\n        "name": "Monitor",\n        "price": 199.99\n      },\n      {\n        "id": "5",\n        "name": "Keyboard",\n        "price": 49.99\n      },\n      // highlight-start\n      {\n        "id": "6",\n        "name": "Mouse",\n        "price": 25.99\n      }\n      // highlight-end\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u66f4\u65b0",children:"\u66f4\u65b0"}),"\n",(0,i.jsx)(e.h3,{id:"1-\u901a\u8fc7-id-\u7c7b\u578b\u5b57\u6bb5\u66f4\u65b0-uma-\u7684\u7528\u6237\u7c7b\u578b",children:"1. \u901a\u8fc7 ID \u7c7b\u578b\u5b57\u6bb5\u66f4\u65b0 Uma \u7684\u7528\u6237\u7c7b\u578b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'mutation {\n  user(id: "21", name: "Uma", userType: REGULAR) {\n    id\n    name\n    userType\n  }\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "data": {\n    "user": {\n      "id": "21",\n      "name": "Uma",\n      // highlight-start\n      "userType": "REGULAR"\n      // highlight-end\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"2-\u901a\u8fc7-where-\u5b57\u6bb5\u66f4\u65b0-uma-\u7684\u7528\u6237\u7c7b\u578b",children:"2. \u901a\u8fc7 where \u5b57\u6bb5\u66f4\u65b0 Uma \u7684\u7528\u6237\u7c7b\u578b"}),"\n",(0,i.jsx)(e.p,{children:"\u6709\u4e9b\u65f6\u5019 Object \u4e2d\u5b58\u5728\u975e\u7a7a\u5b57\u6bb5, \u4f8b\u5982 User \u7684 name \u5b57\u6bb5, \u9700\u8981\u5728\u66f4\u65b0\u65f6\u989d\u5916\u8f93\u5165, \u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528 where \u5b57\u6bb5\u8fdb\u884c\u66f4\u65b0"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'mutation {\n  user(userType: VIP, where: { id: { opr: EQ, val: "21" } }) {\n    id\n    name\n    userType\n  }\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "data": {\n    "user": {\n      "id": "21",\n      "name": "Uma",\n      // highlight-start\n      "userType": "VIP"\n      // highlight-end\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u5220\u9664",children:"\u5220\u9664"}),"\n",(0,i.jsx)(e.h3,{id:"1-\u5220\u9664\u7528\u6237-wendy",children:"1. \u5220\u9664\u7528\u6237 Wendy"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528",(0,i.jsx)(e.code,{children:"isDeprecated: true"}),"\u8868\u793a\u8981\u5220\u9664\u5bf9\u8c61"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'mutation {\n  user(isDeprecated: true, where: { id: { opr: EQ, val: "23" } }) {\n    id\n    name\n  }\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "data": {\n    "user": null\n  }\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u5408\u5e76\u5bf9\u8c61\u6570\u7ec4",children:"\u5408\u5e76\u5bf9\u8c61\u6570\u7ec4"}),"\n",(0,i.jsx)(e.p,{children:"\u5bf9\u4e8e\u5bf9\u8c61\u6570\u7ec4[Object], \u9664\u4e86\u5168\u91cf\u53d8\u66f4\u4e4b\u5916, \u6709\u65f6\u9700\u8981\u6dfb\u52a0\u6216\u79fb\u9664\u5143\u7d20, \u6b64\u65f6\u9700\u8981\u4f7f\u7528@merge \u6307\u4ee4\u8fdb\u884c\u5143\u7d20\u5408\u5e76"}),"\n",(0,i.jsx)(e.p,{children:"\u9996\u5148\u67e5\u8be2 Diana \u7684\u8ba2\u5355"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'{\n  user(name: { opr: EQ, val: "Diana" }) {\n    name\n    orders {\n      id\n      items {\n        id\n        product {\n          name\n        }\n        quantity\n      }\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "data": {\n    "user": {\n      "name": "Diana",\n      "orders": [\n        {\n          // highlight-start\n          "id": "4",\n          // highlight-end\n          "items": [\n            {\n              "id": "6",\n              "product": {\n                "name": "Laptop"\n              },\n              "quantity": 1\n            },\n            {\n              "id": "7",\n              "product": {\n                "name": "Phone"\n              },\n              "quantity": 1\n            },\n            {\n              "id": "8",\n              "product": {\n                "name": "Tablet"\n              },\n              "quantity": 1\n            }\n          ]\n        }\n      ]\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"1-diana-\u7684\u8ba2\u5355\u589e\u52a0-2-\u4e2a-keyboard",children:"1. Diana \u7684\u8ba2\u5355\u589e\u52a0 2 \u4e2a Keyboard"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528",(0,i.jsx)(e.code,{children:'where: {id: {opr: EQ, val: "4"}}'}),"\u6765\u9009\u62e9 Diana \u7684\u8ba2\u5355, \u4f7f\u7528",(0,i.jsx)(e.code,{children:'where: {id: {opr: EQ, val: "5"}}'}),"\u6765\u9009\u62e9 Keyboard"]}),"\n",(0,i.jsx)(e.p,{children:"where \u9664\u4e86\u4f5c\u4e3a\u66f4\u65b0\u6761\u4ef6\u4e4b\u5916, \u8fd8\u53ef\u7528\u4e8e\u901a\u8fc7 ID \u5b57\u6bb5\u9009\u62e9\u5bf9\u8c61"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'mutation {\n  order(\n    items: [{ product: { where: { id: { opr: EQ, val: "5" } } }, quantity: 2 }]\n    where: { id: { opr: EQ, val: "4" } }\n  ) @merge {\n    id\n    items {\n      id\n      product {\n        name\n      }\n      quantity\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "data": {\n    "order": {\n      "id": "4",\n      "items": [\n        {\n          "id": "6",\n          "product": {\n            "name": "Laptop"\n          },\n          "quantity": 1\n        },\n        {\n          "id": "7",\n          "product": {\n            "name": "Phone"\n          },\n          "quantity": 1\n        },\n        {\n          "id": "8",\n          "product": {\n            "name": "Tablet"\n          },\n          "quantity": 1\n        },\n        // highlight-start\n        {\n          "id": "10",\n          "product": {\n            "name": "Keyboard"\n          },\n          "quantity": 2\n        }\n        // highlight-end\n      ]\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"2-\u79fb\u9664-diana-\u7684\u8ba2\u5355\u4e2d\u7684-tablet",children:"2. \u79fb\u9664 Diana \u7684\u8ba2\u5355\u4e2d\u7684 Tablet"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528",(0,i.jsx)(e.code,{children:'where: {id: {opr: EQ, val: "4"}}'}),"\u6765\u9009\u62e9 Diana \u7684\u8ba2\u5355, \u4f7f\u7528",(0,i.jsx)(e.code,{children:'where: {id: {opr: EQ, val: "8"}}'}),"\u6765\u9009\u62e9 Tablet \u6240\u5728\u7684\u8ba2\u5355\u9879, \u4f7f\u7528",(0,i.jsx)(e.code,{children:"isDeprecated: true"}),"\u6807\u8bb0\u8981\u79fb\u9664\u7684\u5143\u7d20"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'mutation {\n  order(\n    items: [{ isDeprecated: true, where: { id: { opr: EQ, val: "8" } } }]\n    where: { id: { opr: EQ, val: "4" } }\n  ) @merge {\n    id\n    items {\n      id\n      product {\n        name\n      }\n      quantity\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "data": {\n    "order": {\n      "id": "4",\n      "items": [\n        {\n          "id": "6",\n          "product": {\n            "name": "Laptop"\n          },\n          "quantity": 1\n        },\n        {\n          "id": "7",\n          "product": {\n            "name": "Phone"\n          },\n          "quantity": 1\n        },\n        {\n          "id": "10",\n          "product": {\n            "name": "Keyboard"\n          },\n          "quantity": 2\n        }\n      ]\n    }\n  }\n}\n'})})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}},5710:(n,e,a)=>{a.d(e,{R:()=>s,x:()=>t});var i=a(758);const r={},d=i.createContext(r);function s(n){const e=i.useContext(d);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:s(n.components),i.createElement(d.Provider,{value:e},n.children)}}}]);