"use strict";(self.webpackChunkgp_doc_github_io=self.webpackChunkgp_doc_github_io||[]).push([[9861],{8057:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>a,frontMatter:()=>l,metadata:()=>d,toc:()=>h});var i=r(6070),s=r(5710);const l={sidebar_position:2},c="\u6388\u6743(Authorization)",d={id:"auth/authorization",title:"\u6388\u6743(Authorization)",description:"\u6388\u6743 (Authorization) \u662f\u5728\u7528\u6237\u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u540e, \u51b3\u5b9a\u5176\u5bf9\u8d44\u6e90\u6216\u64cd\u4f5c\u8bbf\u95ee\u6743\u9650\u7684\u8fc7\u7a0b. \u6388\u6743\u786e\u4fdd\u7528\u6237\u53ea\u80fd\u8bbf\u95ee\u6216\u64cd\u4f5c\u5176\u88ab\u6388\u4e88\u6743\u9650\u7684\u90e8\u5206, \u6388\u6743\u662f\u786e\u4fdd\u7cfb\u7edf\u5b89\u5168\u7684\u91cd\u8981\u673a\u5236, \u9632\u6b62\u672a\u6388\u6743\u7528\u6237\u8bbf\u95ee\u654f\u611f\u6570\u636e\u6216\u6267\u884c\u5173\u952e\u64cd\u4f5c",source:"@site/docs/auth/authorization.md",sourceDirName:"auth",slug:"/auth/authorization",permalink:"/docs/auth/authorization",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"\u8ba4\u8bc1(Authentication)",permalink:"/docs/auth/authentication"},next:{title:"UI",permalink:"/docs/category/ui"}},o={},h=[{value:"\u6388\u6743\u6a21\u578b",id:"\u6388\u6743\u6a21\u578b",level:2},{value:"1. \u7528\u6237 (User)",id:"1-\u7528\u6237-user",level:3},{value:"2. \u89d2\u8272 (Role)",id:"2-\u89d2\u8272-role",level:3},{value:"3. \u8d44\u6e90 (Resource)",id:"3-\u8d44\u6e90-resource",level:3},{value:"4. \u6743\u9650 (Permission)",id:"4-\u6743\u9650-permission",level:3},{value:"5. \u7528\u6237\u7ec4 (Group)",id:"5-\u7528\u6237\u7ec4-group",level:3},{value:"\u4f5c\u7528\u5173\u7cfb",id:"\u4f5c\u7528\u5173\u7cfb",level:3},{value:"\u6a21\u578b\u914d\u7f6e",id:"\u6a21\u578b\u914d\u7f6e",level:2},{value:"\u6743\u9650\u5b57\u7b26\u4e32",id:"\u6743\u9650\u5b57\u7b26\u4e32",level:2},{value:"\u6388\u6743\u62e6\u622a",id:"\u6388\u6743\u62e6\u622a",level:2},{value:"\u914d\u7f6e\u6743\u9650",id:"\u914d\u7f6e\u6743\u9650",level:2},{value:"\u914d\u7f6e\u89d2\u8272",id:"\u914d\u7f6e\u89d2\u8272",level:2},{value:"\u89d2\u8272\u7ec4\u5408",id:"\u89d2\u8272\u7ec4\u5408",level:2}];function t(n){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"\u6388\u6743authorization",children:"\u6388\u6743(Authorization)"}),"\n",(0,i.jsx)(e.p,{children:"\u6388\u6743 (Authorization) \u662f\u5728\u7528\u6237\u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u540e, \u51b3\u5b9a\u5176\u5bf9\u8d44\u6e90\u6216\u64cd\u4f5c\u8bbf\u95ee\u6743\u9650\u7684\u8fc7\u7a0b. \u6388\u6743\u786e\u4fdd\u7528\u6237\u53ea\u80fd\u8bbf\u95ee\u6216\u64cd\u4f5c\u5176\u88ab\u6388\u4e88\u6743\u9650\u7684\u90e8\u5206, \u6388\u6743\u662f\u786e\u4fdd\u7cfb\u7edf\u5b89\u5168\u7684\u91cd\u8981\u673a\u5236, \u9632\u6b62\u672a\u6388\u6743\u7528\u6237\u8bbf\u95ee\u654f\u611f\u6570\u636e\u6216\u6267\u884c\u5173\u952e\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"https://github.com/doukai/graphence",children:(0,i.jsx)(e.strong,{children:"Graphence"})})," \u4f7f\u7528 ",(0,i.jsx)(e.a,{href:"https://casbin.org/",children:"Casbin"})," \u4f5c\u4e3a\u6388\u6743\u7ba1\u7406\u5668, Casbin \u662f\u4e00\u4e2a\u652f\u6301\u591a\u79cd\u8bbf\u95ee\u63a7\u5236\u6a21\u578b (\u5982 ACL, RBAC, ABAC) \u7684\u5f00\u6e90\u6388\u6743\u6846\u67b6, \u5177\u6709\u7075\u6d3b\u7684\u7b56\u7565\u7ba1\u7406, \u8de8\u8bed\u8a00\u652f\u6301, \u9ad8\u6027\u80fd\u548c\u5f3a\u53ef\u6269\u5c55\u6027\u7b49\u7279\u70b9. \u5b83\u9002\u7528\u4e8e\u5404\u79cd\u590d\u6742\u6743\u9650\u7ba1\u7406\u9700\u6c42, \u63d0\u4f9b\u4e30\u5bcc\u7684\u5b58\u50a8\u9002\u914d\u5668\u548c\u7b80\u6d01\u7684 API"]}),"\n",(0,i.jsx)(e.h2,{id:"\u6388\u6743\u6a21\u578b",children:"\u6388\u6743\u6a21\u578b"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"https://github.com/doukai/graphence",children:(0,i.jsx)(e.strong,{children:"Graphence"})})," \u9ed8\u8ba4\u4f7f\u7528 ",(0,i.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Role-based_access_control",children:"RBAC"})," \u4f5c\u4e3a\u6388\u6743\u6a21\u578b"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'"\u7528\u6237"\r\ntype User {\r\n  "\u59d3\u540d"\r\n  name: String!\r\n  "\u8d26\u53f7"\r\n  login: String!\r\n  "\u7ec4"\r\n  groups: [Group]\r\n  "\u89d2\u8272"\r\n  roles: [Role]\r\n  "\u79df\u6237"\r\n  realm: Realm\r\n}\r\n\r\n"\u89d2\u8272"\r\ntype Role {\r\n  "\u540d\u79f0"\r\n  name: String!\r\n  "\u7528\u6237"\r\n  users: [User]\r\n  "\u7ec4"\r\n  groups: [Group]\r\n  "\u7ec4\u5408"\r\n  composites: [Role]\r\n  "\u6743\u9650"\r\n  permissions: [Permission]\r\n  "\u79df\u6237"\r\n  realm: Realm\r\n}\r\n\r\n"\u7ec4"\r\ntype Group {\r\n  "\u540d\u79f0"\r\n  name: String!\r\n  "\u4e0a\u7ea7"\r\n  parent: Group\r\n  "\u4e0b\u7ea7"\r\n  subGroups: [Group]\r\n  "\u7528\u6237"\r\n  users: [User]\r\n  "\u89d2\u8272"\r\n  roles: [Role]\r\n  "\u79df\u6237"\r\n  realm: Realm\r\n}\r\n\r\n"\u79df\u6237"\r\ntype Realm {\r\n  "\u540d\u79f0"\r\n  name: String!\r\n}\r\n\r\n"\u6743\u9650"\r\ntype Permission {\r\n  "\u540d\u79f0"\r\n  name: ID!\r\n  "\u5b57\u6bb5"\r\n  field: String!\r\n  "\u5b9e\u4f53"\r\n  type: String!\r\n  "\u6743\u9650\u7c7b\u578b"\r\n  permissionType: PermissionType!\r\n  "\u89d2\u8272"\r\n  roles: [Role]\r\n  "\u79df\u6237"\r\n  realm: Realm\r\n}\r\n\r\n"\u6743\u9650\u7c7b\u578b"\r\nenum PermissionType {\r\n  "\u8bfb\u53d6"\r\n  READ\r\n  "\u5199\u5165"\r\n  WRITE\r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u5728 RBAC (Role-Based Access Control) \u6a21\u578b\u4e2d, \u7528\u6237, \u89d2\u8272, \u8d44\u6e90, \u6743\u9650\u548c\u7528\u6237\u7ec4\u662f\u4e94\u4e2a\u6838\u5fc3\u5143\u7d20. \u5b83\u4eec\u76f8\u4e92\u5173\u8054, \u5171\u540c\u6784\u6210\u4e86\u8bbf\u95ee\u63a7\u5236\u7684\u57fa\u7840. \u4e0b\u9762\u5206\u522b\u4ecb\u7ecd\u5b83\u4eec\u7684\u4f5c\u7528:"}),"\n",(0,i.jsx)(e.h3,{id:"1-\u7528\u6237-user",children:"1. \u7528\u6237 (User)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u7528\u6237"}),"\u662f\u7cfb\u7edf\u4e2d\u7684\u4e3b\u4f53, \u901a\u5e38\u4ee3\u8868\u5b9e\u9645\u7684\u4e2a\u4eba, \u670d\u52a1\u8d26\u53f7\u6216\u5176\u4ed6\u5b9e\u4f53. \u5728 RBAC \u6a21\u578b\u4e2d, \u7528\u6237\u5e76\u4e0d\u4f1a\u76f4\u63a5\u88ab\u8d4b\u4e88\u6743\u9650, \u800c\u662f\u901a\u8fc7\u88ab\u5206\u914d\u4e00\u4e2a\u6216\u591a\u4e2a\u89d2\u8272\u6765\u83b7\u5f97\u76f8\u5e94\u7684\u6743\u9650. \u7528\u6237\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u6267\u884c\u7cfb\u7edf\u4e2d\u7684\u64cd\u4f5c, \u5e76\u901a\u8fc7\u89d2\u8272\u6765\u786e\u5b9a\u5176\u53ef\u4ee5\u6267\u884c\u54ea\u4e9b\u64cd\u4f5c\u6216\u8bbf\u95ee\u54ea\u4e9b\u8d44\u6e90"]}),"\n",(0,i.jsx)(e.h3,{id:"2-\u89d2\u8272-role",children:"2. \u89d2\u8272 (Role)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u89d2\u8272"}),"\u662f\u6743\u9650\u7684\u96c6\u5408, \u5b83\u4ee3\u8868\u7cfb\u7edf\u4e2d\u7684\u67d0\u79cd\u529f\u80fd\u6216\u804c\u8d23. \u6bcf\u4e2a\u89d2\u8272\u4e0e\u4e00\u7ec4\u7279\u5b9a\u7684\u6743\u9650\u5173\u8054, \u7528\u6237\u901a\u8fc7\u88ab\u8d4b\u4e88\u89d2\u8272\u6765\u83b7\u5f97\u8fd9\u4e9b\u6743\u9650. \u89d2\u8272\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u7b80\u5316\u6743\u9650\u7ba1\u7406, \u901a\u8fc7\u89d2\u8272\u7684\u914d\u7f6e, \u53ef\u4ee5\u7075\u6d3b\u8c03\u6574\u548c\u63a7\u5236\u7528\u6237\u7684\u6743\u9650, \u800c\u65e0\u9700\u9010\u4e2a\u7ba1\u7406\u7528\u6237\u4e0e\u6743\u9650\u7684\u5173\u7cfb"]}),"\n",(0,i.jsx)(e.h3,{id:"3-\u8d44\u6e90-resource",children:"3. \u8d44\u6e90 (Resource)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u8d44\u6e90"}),"\u662f\u7cfb\u7edf\u4e2d\u7684\u53d7\u4fdd\u62a4\u5bf9\u8c61, \u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u6216\u64cd\u4f5c\u7684 GraphQL \u5bf9\u8c61(Object)\u548c\u5b57\u6bb5(Field)"]}),"\n",(0,i.jsx)(e.h3,{id:"4-\u6743\u9650-permission",children:"4. \u6743\u9650 (Permission)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u6743\u9650"}),"\u662f\u5bf9\u8d44\u6e90\u7684\u8bbf\u95ee\u6216\u64cd\u4f5c\u6743\u5229, \u4e0e\u8bfb\u53d6(READ), \u5199\u5165(WRITE)\u64cd\u4f5c\u76f8\u5173\u8054. \u6bcf\u4e2a\u89d2\u8272\u4e0e\u4e00\u7ec4\u6743\u9650\u5173\u8054, \u89d2\u8272\u51b3\u5b9a\u4e86\u7528\u6237\u53ef\u4ee5\u6267\u884c\u54ea\u4e9b\u64cd\u4f5c\u6216\u8bbf\u95ee\u54ea\u4e9b\u8d44\u6e90. \u6743\u9650\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u63a7\u5236\u7528\u6237\u5bf9\u8d44\u6e90\u7684\u8bbf\u95ee, \u786e\u4fdd\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u548c\u64cd\u4f5c\u7684\u5408\u6cd5\u6027"]}),"\n",(0,i.jsx)(e.h3,{id:"5-\u7528\u6237\u7ec4-group",children:"5. \u7528\u6237\u7ec4 (Group)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u7528\u6237\u7ec4"}),"\u662f\u7528\u6237\u7684\u96c6\u5408, \u4ee3\u8868\u5177\u6709\u76f8\u4f3c\u8bbf\u95ee\u9700\u6c42\u7684\u4e00\u7ec4\u7528\u6237. \u5728\u67d0\u4e9b RBAC \u5b9e\u73b0\u4e2d, \u7528\u6237\u7ec4\u53ef\u4ee5\u7b80\u5316\u7528\u6237\u7684\u89d2\u8272\u5206\u914d. \u901a\u8fc7\u5c06\u89d2\u8272\u8d4b\u4e88\u7528\u6237\u7ec4, \u800c\u4e0d\u662f\u5355\u72ec\u7684\u7528\u6237, \u7cfb\u7edf\u7ba1\u7406\u5458\u53ef\u4ee5\u66f4\u6709\u6548\u5730\u7ba1\u7406\u548c\u8c03\u6574\u5927\u89c4\u6a21\u7528\u6237\u7684\u6743\u9650\u914d\u7f6e. \u7528\u6237\u7ec4\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u4e3a\u5177\u6709\u76f8\u540c\u804c\u8d23\u6216\u6743\u9650\u8981\u6c42\u7684\u7528\u6237\u7fa4\u4f53\u63d0\u4f9b\u7edf\u4e00\u7684\u6743\u9650\u7ba1\u7406"]}),"\n",(0,i.jsx)(e.h3,{id:"\u4f5c\u7528\u5173\u7cfb",children:"\u4f5c\u7528\u5173\u7cfb"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7528\u6237"}),"\u901a\u8fc7",(0,i.jsx)(e.strong,{children:"\u7528\u6237\u7ec4"}),"\u6216\u76f4\u63a5\u5206\u914d\u83b7\u5f97\u4e00\u4e2a\u6216\u591a\u4e2a",(0,i.jsx)(e.strong,{children:"\u89d2\u8272"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u89d2\u8272"}),"\u4e0e\u4e00\u7ec4",(0,i.jsx)(e.strong,{children:"\u6743\u9650"}),"\u5173\u8054, \u5b9a\u4e49\u4e86\u7528\u6237\u53ef\u4ee5\u5bf9\u54ea\u4e9b",(0,i.jsx)(e.strong,{children:"\u8d44\u6e90"}),"\u6267\u884c\u54ea\u4e9b\u64cd\u4f5c"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u8d44\u6e90"}),"\u53d7\u5230",(0,i.jsx)(e.strong,{children:"\u6743\u9650"}),"\u7684\u4fdd\u62a4, \u786e\u4fdd\u53ea\u6709\u7279\u5b9a\u89d2\u8272\u7684\u7528\u6237\u624d\u80fd\u8bbf\u95ee\u6216\u64cd\u4f5c"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u8fd9\u4e9b\u5143\u7d20\u7684\u7ec4\u5408, RBAC \u6a21\u578b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7075\u6d3b\u800c\u5f3a\u5927\u7684\u8bbf\u95ee\u63a7\u5236\u673a\u5236, \u4f7f\u5f97\u6743\u9650\u7ba1\u7406\u66f4\u52a0\u7b80\u5316, \u9ad8\u6548, \u5c24\u5176\u5728\u590d\u6742\u7cfb\u7edf\u6216\u5927\u578b\u7ec4\u7ec7\u4e2d\u5c24\u4e3a\u6709\u6548"}),"\n",(0,i.jsx)(e.h2,{id:"\u6a21\u578b\u914d\u7f6e",children:"\u6a21\u578b\u914d\u7f6e"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"#%E6%8E%88%E6%9D%83%E6%A8%A1%E5%9E%8B",children:"\u6388\u6743\u6a21\u578b"}),"\u9700\u8981\u8f6c\u6362\u4e3a Casbin \u7684",(0,i.jsx)(e.a,{href:"https://casbin.org/zh/docs/syntax-for-models",children:"\u6a21\u578b\u914d\u7f6e(Model)"}),"\u540e\u751f\u6548. Casbin \u652f\u6301\u591a\u79cd\u8bbf\u95ee\u63a7\u5236\u6a21\u578b (\u5982 ACL, RBAC, ABAC), \u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u573a\u666f\u7075\u6d3b\u914d\u7f6e",(0,i.jsx)(e.a,{href:"https://casbin.org/zh/docs/supported-models",children:"\u6a21\u578b\u6587\u4ef6"})]}),"\n",(0,i.jsx)(e.p,{children:"\u57fa\u4e8e\u79df\u6237\u67b6\u6784\u7684 RBAC \u6a21\u578b\u914d\u7f6e:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-conf",metastring:'title="model.conf"',children:'[request_definition]\r\nr = sub, dom, obj, act\r\n\r\n[policy_definition]\r\np = sub, dom, obj, act\r\n\r\n[role_definition]\r\ng = _, _, _\r\n\r\n[policy_effect]\r\ne = some(where (p.eft == allow))\r\n\r\n[matchers]\r\nm = g(r.sub, p.sub, r.dom) && r.dom == p.dom && r.obj == p.obj && r.act == p.act || r.sub == "U::1"\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsxs)(e.em,{children:[(0,i.jsx)(e.code,{children:"[matchers]"})," \u914d\u7f6e\u4e2d ",(0,i.jsx)(e.code,{children:'|| r.sub == "U::1"'})," \u8868\u793a ",(0,i.jsx)(e.code,{children:"id = 1"})," \u7684\u7528\u6237(",(0,i.jsx)(e.a,{href:"/docs/auth/authentication#%E5%88%9D%E5%A7%8B%E5%8C%96%E7%AE%A1%E7%90%86%E5%91%98%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83",children:"\u521d\u59cb\u7ba1\u7406\u5458"}),")\u53ef\u4ee5\u8df3\u8fc7\u6388\u6743\u62e6\u622a, \u4e3a\u5f00\u53d1\u73af\u5883\u63d0\u4f9b\u4fbf\u5229"]})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"U::"}),"(\u7528\u6237\u524d\u7f00): ",(0,i.jsx)(e.code,{children:"U::1"})," \u8868\u793a ",(0,i.jsx)(e.code,{children:"id = 1"})," \u7684\u7528\u6237"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"R::"}),"(\u89d2\u8272\u524d\u7f00): ",(0,i.jsx)(e.code,{children:"R::1"})," \u8868\u793a ",(0,i.jsx)(e.code,{children:"id = 1"})," \u7684\u89d2\u8272"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"G::"}),"(\u7528\u6237\u7ec4\u524d\u7f00): ",(0,i.jsx)(e.code,{children:"G::1"})," \u8868\u793a ",(0,i.jsx)(e.code,{children:"id = 1"})," \u7684\u7528\u6237\u7ec4"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u6743\u9650\u5b57\u7b26\u4e32",children:"\u6743\u9650\u5b57\u7b26\u4e32"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"https://github.com/doukai/graphence",children:(0,i.jsx)(e.strong,{children:"Graphence"})})," \u901a\u8fc7\u6743\u9650\u5b57\u7b26\u4e32\u63a7\u5236\u5bf9\u8c61\u548c\u5b57\u6bb5\u7684\u8bbf\u95ee, \u6743\u9650\u5b57\u7b26\u4e32\u683c\u5f0f: ",(0,i.jsx)(e.code,{children:"\u5bf9\u8c61\u540d::\u5b57\u6bb5\u540d::\u64cd\u4f5c"})]}),"\n",(0,i.jsx)(e.p,{children:"\u4f8b:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8bfb\u53d6\u7528\u6237\u540d: ",(0,i.jsx)(e.code,{children:"User::name::READ"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u5199\u5165\u89d2\u8272\u540d: ",(0,i.jsx)(e.code,{children:"Role::name::WRITE"})]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528\u914d\u7f6e ",(0,i.jsx)(e.code,{children:"security.buildPermission"})," \u81ea\u52a8\u751f\u6210\u6743\u9650\u5b57\u7b26\u4e32, Graphence \u901a\u8fc7 Object \u548c Field \u7684\u5b9a\u4e49\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u6743\u9650\u5b57\u7b26\u4e32"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-conf",children:"security {\r\n  buildPermission = true\r\n}\n"})}),"\n",(0,i.jsx)(e.h2,{id:"\u6388\u6743\u62e6\u622a",children:"\u6388\u6743\u62e6\u622a"}),"\n",(0,i.jsx)(e.p,{children:"\u672a\u6388\u6743\u7684\u67e5\u8be2\u548c\u53d8\u66f4\u90fd\u4f1a\u88ab Graphence \u81ea\u52a8\u62e6\u622a\u548c\u5c4f\u853d"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f8b: \u7528\u6237\u62e5\u6709 ",(0,i.jsx)(e.code,{children:"Product"})," \u5bf9\u8c61\u7684\u6743\u9650:"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Product::name::READ"}),","]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"Product::price::READ"}),","]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"Product::price::WRITE"})}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u67e5\u8be2\u65f6, \u7531\u4e8e\u6ca1\u6709 ",(0,i.jsx)(e.code,{children:"id"})," \u5b57\u6bb5\u7684 ",(0,i.jsx)(e.code,{children:"READ"})," \u6743\u9650, ",(0,i.jsx)(e.code,{children:"id"})," \u5b57\u6bb5\u5c06\u4f1a\u88ab\u5c4f\u853d"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:"{\r\n  roductList {\r\n    // highlight-start\r\n    id\r\n    // highlight-end\r\n    name\r\n    price\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\r\n  "data": {\r\n    "roductList": [\r\n      {\r\n        "name": "Laptop",\r\n        "price": 999.99\r\n      },\r\n      {\r\n        "name": "Phone",\r\n        "price": 499.99\r\n      },\r\n      {\r\n        "name": "Tablet",\r\n        "price": 299.99\r\n      }\r\n    ]\r\n  }\r\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u53d8\u66f4\u65f6, \u7531\u4e8e\u6ca1\u6709 ",(0,i.jsx)(e.code,{children:"name"})," \u5b57\u6bb5\u7684 ",(0,i.jsx)(e.code,{children:"WRITE"})," \u6743\u9650, ",(0,i.jsx)(e.code,{children:"name"})," \u53c2\u6570\u5c06\u4f1a\u88ab\u62e6\u622a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'{\r\n  roduct(\r\n    // highlight-start\r\n    name: "Notebook"\r\n    // highlight-end\r\n    price: 1000.00\r\n    where: { id: { name: { opr: EQ, val: "Laptop" } } }\r\n  ) {\r\n    id\r\n    name\r\n    price\r\n  }\r\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\r\n  "data": {\r\n    "roduct": {\r\n      // highlight-start\r\n      "name": "Laptop",\r\n      // highlight-end\r\n      "price": 1000.00\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u914d\u7f6e\u6743\u9650",children:"\u914d\u7f6e\u6743\u9650"}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u5bf9\u89d2\u8272(Role)\u589e\u52a0\u6216\u5220\u9664\u6743\u9650(Permission)\u63a7\u5236\u5bf9\u8d44\u6e90\u7684\u8bbf\u95ee"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f8b: \u4e3a\u89d2\u8272(",(0,i.jsx)(e.code,{children:"id = 1"}),") \u6dfb\u52a0\u5bf9 ",(0,i.jsx)(e.code,{children:"User"})," \u5bf9\u8c61 ",(0,i.jsx)(e.code,{children:"name"})," \u5b57\u6bb5\u7684 ",(0,i.jsx)(e.code,{children:"READ"})," \u6743\u9650"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'mutation {\r\n  role(\r\n    permissions: [{ where: { name: { val: "User::name::READ" } } }]\r\n    where: { id: { val: "1" } }\r\n  ) @merge {\r\n    name\r\n    permissions {\r\n      name\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u914d\u7f6e\u89d2\u8272",children:"\u914d\u7f6e\u89d2\u8272"}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u5bf9\u7528\u6237(User)\u6216\u7528\u6237\u7ec4(Group)\u589e\u52a0\u6216\u5220\u9664\u89d2\u8272(Role)\u83b7\u5f97\u8bbf\u95ee\u6743\u9650(Permission)"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f8b: \u4e3a\u7528\u6237(",(0,i.jsx)(e.code,{children:"id = 1"}),") \u6dfb\u52a0\u89d2\u8272(",(0,i.jsx)(e.code,{children:"id = 1"}),") \u83b7\u5f97\u5bf9 ",(0,i.jsx)(e.code,{children:"User"})," \u5bf9\u8c61 ",(0,i.jsx)(e.code,{children:"name"})," \u5b57\u6bb5\u7684 ",(0,i.jsx)(e.code,{children:"READ"})," \u6743\u9650"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'mutation {\r\n  user(roles: [{ where: { id: { val: "1" } } }], where: { id: { val: "1" } })\r\n    @merge {\r\n    name\r\n    roles {\r\n      name\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u89d2\u8272\u7ec4\u5408",children:"\u89d2\u8272\u7ec4\u5408"}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u5bf9\u89d2\u8272(Role)\u589e\u52a0\u6216\u5220\u9664\u5176\u4ed6\u89d2\u8272(Role)\u7ec4\u5408\u89d2\u8272\u6743\u9650"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f8b: \u4e3a\u89d2\u8272(",(0,i.jsx)(e.code,{children:"id = 1"}),") \u6dfb\u52a0\u7ec4\u5408\u89d2\u8272(",(0,i.jsx)(e.code,{children:"id = 2"}),"), \u89d2\u8272(",(0,i.jsx)(e.code,{children:"id = 1"}),")\u5c06\u7ee7\u627f\u89d2\u8272(",(0,i.jsx)(e.code,{children:"id = 2"}),")\u62e5\u6709\u7684\u6743\u9650"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:'mutation {\r\n  role(\r\n    composites: [{ where: { id: { val: "2" } } }]\r\n    where: { id: { val: "1" } }\r\n  ) @merge {\r\n    name\r\n    composites {\r\n      name\r\n    }\r\n  }\r\n}\n'})})]})}function a(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(t,{...n})}):t(n)}},5710:(n,e,r)=>{r.d(e,{R:()=>c,x:()=>d});var i=r(758);const s={},l=i.createContext(s);function c(n){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:c(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);